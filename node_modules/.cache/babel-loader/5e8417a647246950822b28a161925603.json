{"remainingRequest":"C:\\xampp\\htdocs\\SchoolAdmin\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\SchoolAdmin\\src\\assets\\js\\ajaxfileupload.js","dependencies":[{"path":"C:\\xampp\\htdocs\\SchoolAdmin\\src\\assets\\js\\ajaxfileupload.js","mtime":1469695832531},{"path":"C:\\xampp\\htdocs\\SchoolAdmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1532399270981},{"path":"C:\\xampp\\htdocs\\SchoolAdmin\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.constructor\";\njQuery.extend({\n  createUploadIframe: function createUploadIframe(id, uri) {\n    //create frame\n    var frameId = 'jUploadFrame' + id;\n\n    if (window.ActiveXObject) {\n      var io = document.createElement('<iframe id=\"' + frameId + '\" name=\"' + frameId + '\" />');\n\n      if (typeof uri == 'boolean') {\n        io.src = 'javascript:false';\n      } else if (typeof uri == 'string') {\n        io.src = uri;\n      }\n    } else {\n      var io = document.createElement('iframe');\n      io.id = frameId;\n      io.name = frameId;\n    }\n\n    io.style.position = 'absolute';\n    io.style.top = '-1000px';\n    io.style.left = '-1000px';\n    document.body.appendChild(io);\n    return io;\n  },\n  createUploadForm: function createUploadForm(id, fileElementId) {\n    //create form\n    var formId = 'jUploadForm' + id;\n    var fileId = 'jUploadFile' + id;\n    var form = $('<form  action=\"\" method=\"POST\" name=\"' + formId + '\" id=\"' + formId + '\" enctype=\"multipart/form-data\"></form>');\n    var oldElement = $('#' + fileElementId);\n    var newElement = $(oldElement).clone();\n    $(oldElement).attr('id', fileId);\n    $(oldElement).before(newElement);\n    $(oldElement).appendTo(form); //set attributes\n\n    $(form).css('position', 'absolute');\n    $(form).css('top', '-1200px');\n    $(form).css('left', '-1200px');\n    $(form).appendTo('body');\n    return form;\n  },\n  addOtherRequestsToForm: function addOtherRequestsToForm(form, data) {\n    // add extra parameter\n    var originalElement = $('<input type=\"hidden\" name=\"\" value=\"\">');\n\n    for (var key in data) {\n      name = key;\n      value = data[key];\n      var cloneElement = originalElement.clone();\n      cloneElement.attr({\n        'name': name,\n        'value': value\n      });\n      $(cloneElement).appendTo(form);\n    }\n\n    return form;\n  },\n  ajaxFileUpload: function ajaxFileUpload(s) {\n    // TODO introduce global settings, allowing the client to modify them for all requests, not only timeout\n    s = jQuery.extend({}, jQuery.ajaxSettings, s);\n    var id = new Date().getTime();\n    var form = jQuery.createUploadForm(id, s.fileElementId);\n    if (s.data) form = jQuery.addOtherRequestsToForm(form, s.data);\n    var io = jQuery.createUploadIframe(id, s.secureuri);\n    var frameId = 'jUploadFrame' + id;\n    var formId = 'jUploadForm' + id; // Watch for a new set of requests\n\n    if (s.global && !jQuery.active++) {\n      jQuery.event.trigger(\"ajaxStart\");\n    }\n\n    var requestDone = false; // Create the request object\n\n    var xml = {};\n    if (s.global) jQuery.event.trigger(\"ajaxSend\", [xml, s]); // Wait for a response to come back\n\n    var uploadCallback = function uploadCallback(isTimeout) {\n      var io = document.getElementById(frameId);\n\n      try {\n        if (io.contentWindow) {\n          xml.responseText = io.contentWindow.document.body ? io.contentWindow.document.body.innerHTML : null;\n          xml.responseXML = io.contentWindow.document.XMLDocument ? io.contentWindow.document.XMLDocument : io.contentWindow.document;\n        } else if (io.contentDocument) {\n          xml.responseText = io.contentDocument.document.body ? io.contentDocument.document.body.innerHTML : null;\n          xml.responseXML = io.contentDocument.document.XMLDocument ? io.contentDocument.document.XMLDocument : io.contentDocument.document;\n        }\n      } catch (e) {\n        jQuery.handleError(s, xml, null, e);\n      }\n\n      if (xml || isTimeout == \"timeout\") {\n        requestDone = true;\n        var status;\n\n        try {\n          status = isTimeout != \"timeout\" ? \"success\" : \"error\"; // Make sure that the request was successful or notmodified\n\n          if (status != \"error\") {\n            // process the data (runs the xml through httpData regardless of callback)\n            var data = jQuery.uploadHttpData(xml, s.dataType); // If a local callback was specified, fire it and pass it the data\n\n            if (s.success) s.success(data, status); // Fire the global callback\n\n            if (s.global) jQuery.event.trigger(\"ajaxSuccess\", [xml, s]);\n          } else jQuery.handleError(s, xml, status);\n        } catch (e) {\n          status = \"error\";\n          jQuery.handleError(s, xml, status, e);\n        } // The request was completed\n\n\n        if (s.global) jQuery.event.trigger(\"ajaxComplete\", [xml, s]); // Handle the global AJAX counter\n\n        if (s.global && ! --jQuery.active) jQuery.event.trigger(\"ajaxStop\"); // Process result\n\n        if (s.complete) s.complete(xml, status);\n        jQuery(io).unbind();\n        setTimeout(function () {\n          try {\n            $(io).remove();\n            $(form).remove();\n          } catch (e) {\n            jQuery.handleError(s, xml, null, e);\n          }\n        }, 100);\n        xml = null;\n      }\n    }; // Timeout checker\n\n\n    if (s.timeout > 0) {\n      setTimeout(function () {\n        // Check to see if the request is still happening\n        if (!requestDone) uploadCallback(\"timeout\");\n      }, s.timeout);\n    }\n\n    try {\n      // var io = $('#' + frameId);\n      var form = $('#' + formId);\n      $(form).attr('action', s.url);\n      $(form).attr('method', 'POST');\n      $(form).attr('target', frameId);\n\n      if (form.encoding) {\n        form.encoding = 'multipart/form-data';\n      } else {\n        form.enctype = 'multipart/form-data';\n      }\n\n      $(form).submit();\n    } catch (e) {\n      jQuery.handleError(s, xml, null, e);\n    }\n\n    if (window.attachEvent) {\n      document.getElementById(frameId).attachEvent('onload', uploadCallback);\n    } else {\n      document.getElementById(frameId).addEventListener('load', uploadCallback, false);\n    }\n\n    return {\n      abort: function abort() {}\n    };\n  },\n  uploadHttpData: function uploadHttpData(r, type) {\n    var data = !type;\n    data = type == \"xml\" || data ? r.responseXML : r.responseText; // If the type is \"script\", eval it in global context\n\n    if (type == \"script\") jQuery.globalEval(data); // Get the JavaScript object, if JSON is used.\n\n    if (type == \"json\") {\n      // If you add mimetype in your response,\n      // you have to delete the '<pre></pre>' tag.\n      // The pre tag in Chrome has attribute, so have to use regex to remove\n      var data = r.responseText;\n      var rx = new RegExp(\"<pre.*?>(.*?)</pre>\", \"i\");\n      var am = rx.exec(data); //this is the desired data extracted\n\n      var data = am ? am[1] : \"\"; //the only submatch or empty\n\n      eval(\"data = \" + data);\n    } // evaluate scripts within html\n\n\n    if (type == \"html\") jQuery(\"<div>\").html(data).evalScripts(); //alert($('param', data).each(function(){alert($(this).attr('value'));}));\n\n    return data;\n  }\n});",{"version":3,"sources":["src\\assets\\js\\ajaxfileupload.js"],"names":["jQuery","extend","createUploadIframe","id","uri","frameId","window","ActiveXObject","io","document","createElement","src","name","style","position","top","left","body","appendChild","createUploadForm","fileElementId","formId","fileId","form","$","oldElement","newElement","clone","attr","before","appendTo","css","addOtherRequestsToForm","data","originalElement","key","value","cloneElement","ajaxFileUpload","s","ajaxSettings","Date","getTime","secureuri","global","active","event","trigger","requestDone","xml","uploadCallback","isTimeout","getElementById","contentWindow","responseText","innerHTML","responseXML","XMLDocument","contentDocument","e","handleError","status","uploadHttpData","dataType","success","complete","unbind","setTimeout","remove","timeout","url","encoding","enctype","submit","attachEvent","addEventListener","abort","r","type","globalEval","rx","RegExp","am","exec","eval","html","evalScripts"],"mappings":"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","sourceRoot":"C:\\xampp\\htdocs\\SchoolAdmin","sourcesContent":["\njQuery.extend({\n\n\n    createUploadIframe: function(id, uri)\n    {\n        //create frame\n        var frameId = 'jUploadFrame' + id;\n\n        if(window.ActiveXObject) {\n            var io = document.createElement('<iframe id=\"' + frameId + '\" name=\"' + frameId + '\" />');\n            if(typeof uri== 'boolean'){\n                io.src = 'javascript:false';\n            }\n            else if(typeof uri== 'string'){\n                io.src = uri;\n            }\n        }\n        else {\n            var io = document.createElement('iframe');\n            io.id = frameId;\n            io.name = frameId;\n        }\n        io.style.position = 'absolute';\n        io.style.top = '-1000px';\n        io.style.left = '-1000px';\n\n        document.body.appendChild(io);\n\n        return io\n    },\n    createUploadForm: function(id, fileElementId)\n    {\n        //create form\n        var formId = 'jUploadForm' + id;\n        var fileId = 'jUploadFile' + id;\n        var form = $('<form  action=\"\" method=\"POST\" name=\"' + formId + '\" id=\"' + formId + '\" enctype=\"multipart/form-data\"></form>');\n        var oldElement = $('#' + fileElementId);\n        var newElement = $(oldElement).clone();\n        $(oldElement).attr('id', fileId);\n        $(oldElement).before(newElement);\n        $(oldElement).appendTo(form);\n        //set attributes\n        $(form).css('position', 'absolute');\n        $(form).css('top', '-1200px');\n        $(form).css('left', '-1200px');\n        $(form).appendTo('body');\n        return form;\n    },\n    addOtherRequestsToForm: function(form,data)\n    {\n        // add extra parameter\n        var originalElement = $('<input type=\"hidden\" name=\"\" value=\"\">');\n        for (var key in data) {\n            name = key;\n            value = data[key];\n            var cloneElement = originalElement.clone();\n            cloneElement.attr({'name':name,'value':value});\n            $(cloneElement).appendTo(form);\n        }\n        return form;\n    },\n\n    ajaxFileUpload: function(s) {\n        // TODO introduce global settings, allowing the client to modify them for all requests, not only timeout\n        s = jQuery.extend({}, jQuery.ajaxSettings, s);\n        var id = new Date().getTime()\n        var form = jQuery.createUploadForm(id, s.fileElementId);\n        if ( s.data ) form = jQuery.addOtherRequestsToForm(form,s.data);\n        var io = jQuery.createUploadIframe(id, s.secureuri);\n        var frameId = 'jUploadFrame' + id;\n        var formId = 'jUploadForm' + id;\n        // Watch for a new set of requests\n        if ( s.global && ! jQuery.active++ )\n        {\n            jQuery.event.trigger( \"ajaxStart\" );\n        }\n        var requestDone = false;\n        // Create the request object\n        var xml = {}\n        if ( s.global )\n            jQuery.event.trigger(\"ajaxSend\", [xml, s]);\n        // Wait for a response to come back\n        var uploadCallback = function(isTimeout)\n        {\n            var io = document.getElementById(frameId);\n            try\n            {\n                if(io.contentWindow)\n                {\n                    xml.responseText = io.contentWindow.document.body?io.contentWindow.document.body.innerHTML:null;\n                    xml.responseXML = io.contentWindow.document.XMLDocument?io.contentWindow.document.XMLDocument:io.contentWindow.document;\n\n                }else if(io.contentDocument)\n                {\n                    xml.responseText = io.contentDocument.document.body?io.contentDocument.document.body.innerHTML:null;\n                    xml.responseXML = io.contentDocument.document.XMLDocument?io.contentDocument.document.XMLDocument:io.contentDocument.document;\n                }\n            }catch(e)\n            {\n                jQuery.handleError(s, xml, null, e);\n            }\n            if ( xml || isTimeout == \"timeout\")\n            {\n                requestDone = true;\n                var status;\n                try {\n                    status = isTimeout != \"timeout\" ? \"success\" : \"error\";\n                    // Make sure that the request was successful or notmodified\n                    if ( status != \"error\" )\n                    {\n                        // process the data (runs the xml through httpData regardless of callback)\n                        var data = jQuery.uploadHttpData( xml, s.dataType );\n                        // If a local callback was specified, fire it and pass it the data\n                        if ( s.success )\n                            s.success( data, status );\n\n                        // Fire the global callback\n                        if( s.global )\n                            jQuery.event.trigger( \"ajaxSuccess\", [xml, s] );\n                    } else\n                        jQuery.handleError(s, xml, status);\n                } catch(e)\n                {\n                    status = \"error\";\n                    jQuery.handleError(s, xml, status, e);\n                }\n\n                // The request was completed\n                if( s.global )\n                    jQuery.event.trigger( \"ajaxComplete\", [xml, s] );\n\n                // Handle the global AJAX counter\n                if ( s.global && ! --jQuery.active )\n                    jQuery.event.trigger( \"ajaxStop\" );\n\n                // Process result\n                if ( s.complete )\n                    s.complete(xml, status);\n\n                jQuery(io).unbind()\n\n                setTimeout(function()\n                {\ttry\n                    {\n                        $(io).remove();\n                        $(form).remove();\n\n                    } catch(e)\n                    {\n                        jQuery.handleError(s, xml, null, e);\n                    }\n\n                }, 100)\n\n                xml = null\n\n            }\n        }\n        // Timeout checker\n        if ( s.timeout > 0 )\n        {\n            setTimeout(function(){\n                // Check to see if the request is still happening\n                if( !requestDone ) uploadCallback( \"timeout\" );\n            }, s.timeout);\n        }\n        try\n        {\n            // var io = $('#' + frameId);\n            var form = $('#' + formId);\n            $(form).attr('action', s.url);\n            $(form).attr('method', 'POST');\n            $(form).attr('target', frameId);\n            if(form.encoding)\n            {\n                form.encoding = 'multipart/form-data';\n            }\n            else\n            {\n                form.enctype = 'multipart/form-data';\n            }\n            $(form).submit();\n\n        } catch(e)\n        {\n            jQuery.handleError(s, xml, null, e);\n        }\n        if(window.attachEvent){\n            document.getElementById(frameId).attachEvent('onload', uploadCallback);\n        }\n        else{\n            document.getElementById(frameId).addEventListener('load', uploadCallback, false);\n        }\n        return {abort: function () {}};\n\n    },\n\n    uploadHttpData: function( r, type ) {\n        var data = !type;\n        data = type == \"xml\" || data ? r.responseXML : r.responseText;\n        // If the type is \"script\", eval it in global context\n        if ( type == \"script\" )\n            jQuery.globalEval( data );\n        // Get the JavaScript object, if JSON is used.\n        if ( type == \"json\" )\n        {\n            // If you add mimetype in your response,\n            // you have to delete the '<pre></pre>' tag.\n            // The pre tag in Chrome has attribute, so have to use regex to remove\n            var data = r.responseText;\n            var rx = new RegExp(\"<pre.*?>(.*?)</pre>\",\"i\");\n            var am = rx.exec(data);\n            //this is the desired data extracted\n            var data = (am) ? am[1] : \"\";    //the only submatch or empty\n            eval( \"data = \" + data );\n        }\n        // evaluate scripts within html\n        if ( type == \"html\" )\n            jQuery(\"<div>\").html(data).evalScripts();\n        //alert($('param', data).each(function(){alert($(this).attr('value'));}));\n        return data;\n    }\n})\n\n"]}]}